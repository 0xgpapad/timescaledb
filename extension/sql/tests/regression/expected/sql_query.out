psql:include/create_clustered_db.sql:12: NOTICE:  installing required extension "dblink"
psql:include/create_clustered_db.sql:12: NOTICE:  installing required extension "postgres_fdw"
psql:include/create_clustered_db.sql:12: NOTICE:  installing required extension "hstore"
psql:include/create_clustered_db.sql:16: NOTICE:  installing required extension "dblink"
psql:include/create_clustered_db.sql:16: NOTICE:  installing required extension "postgres_fdw"
psql:include/create_clustered_db.sql:16: NOTICE:  installing required extension "hstore"
psql:include/create_clustered_db.sql:20: NOTICE:  installing required extension "dblink"
psql:include/create_clustered_db.sql:20: NOTICE:  installing required extension "postgres_fdw"
psql:include/create_clustered_db.sql:20: NOTICE:  installing required extension "hstore"
\c Test1
SELECT * FROM "testNs";
     timeCustom      | device_id | series_0 | series_1 | series_2 | series_bool 
---------------------+-----------+----------+----------+----------+-------------
 1257894000000000000 | dev1      |      1.5 |        1 |        2 | t
 1257894000000000000 | dev1      |      1.5 |        2 |          | 
 1257894000000001000 | dev1      |      2.5 |        3 |          | 
 1257894001000000000 | dev1      |      3.5 |        4 |          | 
 1257897600000000000 | dev1      |      4.5 |        5 |          | f
 1257894002000000000 | dev1      |      2.5 |        3 |          | 
 1257987600000000000 | dev1      |      1.5 |        1 |          | 
 1257987600000000000 | dev1      |      1.5 |        2 |          | 
 1257894000000000000 | dev20     |      1.5 |        1 |          | 
 1257894000000000000 | dev20     |      1.5 |        2 |          | 
(10 rows)

EXPLAIN (verbose ON, costs off) SELECT * FROM "testNs";
                                                                                                          QUERY PLAN                                                                                                          
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Append
   ->  Seq Scan on _sysinternal._hyper_1_0_replica
         Output: _hyper_1_0_replica."timeCustom", _hyper_1_0_replica.device_id, _hyper_1_0_replica.series_0, _hyper_1_0_replica.series_1, _hyper_1_0_replica.series_2, _hyper_1_0_replica.series_bool
   ->  Seq Scan on _sysinternal._hyper_1_1_0_partition
         Output: _hyper_1_1_0_partition."timeCustom", _hyper_1_1_0_partition.device_id, _hyper_1_1_0_partition.series_0, _hyper_1_1_0_partition.series_1, _hyper_1_1_0_partition.series_2, _hyper_1_1_0_partition.series_bool
   ->  Seq Scan on _sysinternal._hyper_1_2_0_partition
         Output: _hyper_1_2_0_partition."timeCustom", _hyper_1_2_0_partition.device_id, _hyper_1_2_0_partition.series_0, _hyper_1_2_0_partition.series_1, _hyper_1_2_0_partition.series_2, _hyper_1_2_0_partition.series_bool
   ->  Foreign Scan on _sysinternal._hyper_1_1_0_1_data
         Output: _hyper_1_1_0_1_data."timeCustom", _hyper_1_1_0_1_data.device_id, _hyper_1_1_0_1_data.series_0, _hyper_1_1_0_1_data.series_1, _hyper_1_1_0_1_data.series_2, _hyper_1_1_0_1_data.series_bool
         Remote SQL: SELECT "timeCustom", device_id, series_0, series_1, series_2, series_bool FROM _sysinternal._hyper_1_1_0_1_data
   ->  Foreign Scan on _sysinternal._hyper_1_1_0_2_data
         Output: _hyper_1_1_0_2_data."timeCustom", _hyper_1_1_0_2_data.device_id, _hyper_1_1_0_2_data.series_0, _hyper_1_1_0_2_data.series_1, _hyper_1_1_0_2_data.series_2, _hyper_1_1_0_2_data.series_bool
         Remote SQL: SELECT "timeCustom", device_id, series_0, series_1, series_2, series_bool FROM _sysinternal._hyper_1_1_0_2_data
   ->  Seq Scan on _sysinternal._hyper_1_2_0_3_data
         Output: _hyper_1_2_0_3_data."timeCustom", _hyper_1_2_0_3_data.device_id, _hyper_1_2_0_3_data.series_0, _hyper_1_2_0_3_data.series_1, _hyper_1_2_0_3_data.series_2, _hyper_1_2_0_3_data.series_bool
(15 rows)

\echo "The following queries should NOT scan testNs._hyper_1_1_0_partition"
"The following queries should NOT scan testNs._hyper_1_1_0_partition"
EXPLAIN (verbose ON, costs off) SELECT * FROM "testNs" WHERE device_id = 'dev20';
                                                                                                          QUERY PLAN                                                                                                          
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Append
   ->  Seq Scan on _sysinternal._hyper_1_0_replica
         Output: _hyper_1_0_replica."timeCustom", _hyper_1_0_replica.device_id, _hyper_1_0_replica.series_0, _hyper_1_0_replica.series_1, _hyper_1_0_replica.series_2, _hyper_1_0_replica.series_bool
         Filter: ((_hyper_1_0_replica.device_id = 'dev20'::text) AND ((((_sysinternal.murmur3_hash_string(_hyper_1_0_replica.device_id, 1) & 2147483647) % 32768))::smallint = '28646'::smallint))
   ->  Seq Scan on _sysinternal._hyper_1_2_0_partition
         Output: _hyper_1_2_0_partition."timeCustom", _hyper_1_2_0_partition.device_id, _hyper_1_2_0_partition.series_0, _hyper_1_2_0_partition.series_1, _hyper_1_2_0_partition.series_2, _hyper_1_2_0_partition.series_bool
         Filter: ((_hyper_1_2_0_partition.device_id = 'dev20'::text) AND ((((_sysinternal.murmur3_hash_string(_hyper_1_2_0_partition.device_id, 1) & 2147483647) % 32768))::smallint = '28646'::smallint))
   ->  Bitmap Heap Scan on _sysinternal._hyper_1_2_0_3_data
         Output: _hyper_1_2_0_3_data."timeCustom", _hyper_1_2_0_3_data.device_id, _hyper_1_2_0_3_data.series_0, _hyper_1_2_0_3_data.series_1, _hyper_1_2_0_3_data.series_2, _hyper_1_2_0_3_data.series_bool
         Recheck Cond: (_hyper_1_2_0_3_data.device_id = 'dev20'::text)
         Filter: ((((_sysinternal.murmur3_hash_string(_hyper_1_2_0_3_data.device_id, 1) & 2147483647) % 32768))::smallint = '28646'::smallint)
         ->  Bitmap Index Scan on "1-testNs_device_id_timeCustom_idx"
               Index Cond: (_hyper_1_2_0_3_data.device_id = 'dev20'::text)
(13 rows)

EXPLAIN (verbose ON, costs off) SELECT * FROM "testNs" WHERE device_id = 'dev'||'20';
                                                                                                          QUERY PLAN                                                                                                          
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Append
   ->  Seq Scan on _sysinternal._hyper_1_0_replica
         Output: _hyper_1_0_replica."timeCustom", _hyper_1_0_replica.device_id, _hyper_1_0_replica.series_0, _hyper_1_0_replica.series_1, _hyper_1_0_replica.series_2, _hyper_1_0_replica.series_bool
         Filter: ((_hyper_1_0_replica.device_id = 'dev20'::text) AND ((((_sysinternal.murmur3_hash_string(_hyper_1_0_replica.device_id, 1) & 2147483647) % 32768))::smallint = '28646'::smallint))
   ->  Seq Scan on _sysinternal._hyper_1_2_0_partition
         Output: _hyper_1_2_0_partition."timeCustom", _hyper_1_2_0_partition.device_id, _hyper_1_2_0_partition.series_0, _hyper_1_2_0_partition.series_1, _hyper_1_2_0_partition.series_2, _hyper_1_2_0_partition.series_bool
         Filter: ((_hyper_1_2_0_partition.device_id = 'dev20'::text) AND ((((_sysinternal.murmur3_hash_string(_hyper_1_2_0_partition.device_id, 1) & 2147483647) % 32768))::smallint = '28646'::smallint))
   ->  Bitmap Heap Scan on _sysinternal._hyper_1_2_0_3_data
         Output: _hyper_1_2_0_3_data."timeCustom", _hyper_1_2_0_3_data.device_id, _hyper_1_2_0_3_data.series_0, _hyper_1_2_0_3_data.series_1, _hyper_1_2_0_3_data.series_2, _hyper_1_2_0_3_data.series_bool
         Recheck Cond: (_hyper_1_2_0_3_data.device_id = 'dev20'::text)
         Filter: ((((_sysinternal.murmur3_hash_string(_hyper_1_2_0_3_data.device_id, 1) & 2147483647) % 32768))::smallint = '28646'::smallint)
         ->  Bitmap Index Scan on "1-testNs_device_id_timeCustom_idx"
               Index Cond: (_hyper_1_2_0_3_data.device_id = 'dev20'::text)
(13 rows)

EXPLAIN (verbose ON, costs off) SELECT * FROM "testNs" WHERE 'dev'||'20' = device_id;
                                                                                                          QUERY PLAN                                                                                                          
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Append
   ->  Seq Scan on _sysinternal._hyper_1_0_replica
         Output: _hyper_1_0_replica."timeCustom", _hyper_1_0_replica.device_id, _hyper_1_0_replica.series_0, _hyper_1_0_replica.series_1, _hyper_1_0_replica.series_2, _hyper_1_0_replica.series_bool
         Filter: (('dev20'::text = _hyper_1_0_replica.device_id) AND ((((_sysinternal.murmur3_hash_string(_hyper_1_0_replica.device_id, 1) & 2147483647) % 32768))::smallint = '28646'::smallint))
   ->  Seq Scan on _sysinternal._hyper_1_2_0_partition
         Output: _hyper_1_2_0_partition."timeCustom", _hyper_1_2_0_partition.device_id, _hyper_1_2_0_partition.series_0, _hyper_1_2_0_partition.series_1, _hyper_1_2_0_partition.series_2, _hyper_1_2_0_partition.series_bool
         Filter: (('dev20'::text = _hyper_1_2_0_partition.device_id) AND ((((_sysinternal.murmur3_hash_string(_hyper_1_2_0_partition.device_id, 1) & 2147483647) % 32768))::smallint = '28646'::smallint))
   ->  Bitmap Heap Scan on _sysinternal._hyper_1_2_0_3_data
         Output: _hyper_1_2_0_3_data."timeCustom", _hyper_1_2_0_3_data.device_id, _hyper_1_2_0_3_data.series_0, _hyper_1_2_0_3_data.series_1, _hyper_1_2_0_3_data.series_2, _hyper_1_2_0_3_data.series_bool
         Recheck Cond: ('dev20'::text = _hyper_1_2_0_3_data.device_id)
         Filter: ((((_sysinternal.murmur3_hash_string(_hyper_1_2_0_3_data.device_id, 1) & 2147483647) % 32768))::smallint = '28646'::smallint)
         ->  Bitmap Index Scan on "1-testNs_device_id_timeCustom_idx"
               Index Cond: ('dev20'::text = _hyper_1_2_0_3_data.device_id)
(13 rows)

--TODO: handle this later?
--EXPLAIN (verbose ON, costs off) SELECT * FROM "testNs" WHERE device_id IN ('dev20', 'dev21');
